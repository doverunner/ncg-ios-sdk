<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857143; overflow-x: hidden; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; tab-size: 4; background-position: inherit; background-repeat: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) { 
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror-linenumber { }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit; background-repeat: inherit; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; background-position: 0px 0px; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print { 
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background-color: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { white-space: pre !important; border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; text-shadow: initial !important; background-position: 0px 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print { 
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) { 
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) { 
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571429rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; white-space: nowrap; background-position: inherit; background-repeat: inherit; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; background-position: inherit; background-repeat: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; border: none !important; background-position: 0px 0px !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: 0px 0px; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}


 @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}} .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style><title>NCG-iOS-SDK.Implementation.Guide_Eng</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='sdk-implementation-guide'><span>SDK Implementation Guide</span></h1><p>&nbsp;</p><p><a href='#ncg-sdk-overview'><span>NCG SDK Overview</span></a></p><p><a href='#1-sdk-initialization'><span>1. SDK initialization</span></a></p><ul><li><a href='#initialize'><span>initialize:</span></a></li><li><a href='#local-web-server'><span>Local Web Server</span></a></li><li><a href='#http-callback-optional'><span>HTTP Callback (Optional)</span></a></li><li><a href='#exception-handle-optional'><span>Exception Handle(Optional)</span></a></li></ul><p><a href='#2-license'><span>2. License</span></a></p><ul><li><a href='#contents-check'><span>Contents Check</span></a></li><li><a href='#license-check'><span>License Check</span></a></li><li><a href='#license-acquisition'><span>License Acquisition</span></a></li><li><a href='#license-remove'><span>License Remove</span></a></li><li><a href='#license-information'><span>License Information</span></a></li></ul><p><a href='#3-playback'><span>3. Playback</span></a></p><ul><li><a href='#download-contents'><span>Download Contents</span></a></li><li><a href='#progressive-download'><span>Progressive Download</span></a></li><li><a href='#http-live-streaminghls'><span>HTTP Live Streaming(HLS)</span></a></li><li><a href='#playback-finish'><span>Playback Finish</span></a></li></ul><p><a href='#4-security'><span>4. Security</span></a></p><ul><li><a href='#secure-time'><span>Secure Time</span></a></li><li><a href='#external-display'><span>External Display</span></a></li><li><a href='#screen-recorder'><span>Screen Recorder</span></a></li></ul><p><a href='#5-ncg-file-io'><span>5. NCG File I/O(Unpack)</span></a></p><ul><li><a href='#createncgfile'><span>createNcgFile</span></a></li><li><a href='#open'><span>open</span></a></li><li><a href='#read'><span>read</span></a></li><li><a href='#close'><span>close</span></a></li><li><a href='#unpack-sample-code'><span>Unpack Sample Code</span></a></li></ul><hr /><p>&nbsp;</p><h2 id='ncg-sdk-overview'><span>NCG SDK Overview</span></h2><p><span>NCG SDK is NCG client SDK that provides the interface to use packaged contents.</span>
<span>The packaged contents can be used only if a valid license exists. The license contains encrypted information related to the authority to use contents such as expiration date and the number of times it can be played. </span>
<span>Therefore, the license is essential to use the packaged contents, and if the license does not exist, issuance of the license needs to be requested to the license server. If the license of packaged contents does not exist or is not valid, the use of the contents is restricted. </span>
<span>The packaged contents can be used with the interface provided by SDK, and it should follow the flow below in general.</span></p><div class="md-diagram-panel md-fences-adv-panel"><svg height="923.0078125" version="1.1" width="717.79296875" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 717.79296875 923.0078125" preserveAspectRatio="xMidYMid meet" style="overflow: hidden; position: relative; left: -0.5px; top: -0.765625px;"><desc>Created with Raphaël 2.2.0</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock33-objs9z4v" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obje3ue8" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objwip38" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obja7ql2" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objvbd46" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objo9p6j" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objdql64" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objp9v18" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj1wvf3" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj4gdtn" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objnc96i" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objh9u01" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock33-objbq8ya" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="currentColor" stroke="none"></use></marker></defs><a xlink:href="#initialize"><rect x="0" y="0" width="73.703125" height="35.65625" rx="20" ry="20" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" class="flowchart" id="st" transform="matrix(1,0,0,1,49.0781,27.5234)" style=""></rect></a><a xlink:href="#initialize"><text x="10" y="17.828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="stt" class="flowchartt" transform="matrix(1,0,0,1,49.0781,27.5234)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">initialize:</tspan></text></a><a xlink:href="#contents-check"><path fill="var(--bg-color)" stroke="currentColor" d="M36.64453125,19.67578125L0,39.3515625L73.2890625,78.703125L146.578125,39.3515625L73.2890625,0L0,39.3515625" stroke-width="3" id="isDRM" class="flowchart" transform="matrix(1,0,0,1,12.6406,119.1797)" style=""></path></a><a xlink:href="#contents-check"><text x="41.64453125" y="39.3515625" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="isDRMt" class="flowchartt" transform="matrix(1,0,0,1,12.6406,119.1797)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="-3.546875">Packaged</tspan><tspan dy="16.8" x="41.64453125">Contents ?</tspan></text></a><a xlink:href="#license-check"><rect x="0" y="0" width="108.71875" height="35.65625" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" class="flowchart" id="licenseCheck" transform="matrix(1,0,0,1,31.5703,275.4063)" style=""></rect></a><a xlink:href="#license-check"><text x="10" y="17.828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="licenseCheckt" class="flowchartt" transform="matrix(1,0,0,1,31.5703,275.4063)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">License check</tspan></text></a><a xlink:href="#license-check"><path fill="var(--bg-color)" stroke="currentColor" d="M29.349609375,19.67578125L0,39.3515625L58.69921875,78.703125L117.3984375,39.3515625L58.69921875,0L0,39.3515625" stroke-width="3" id="exist" class="flowchart" transform="matrix(1,0,0,1,27.2305,367.0625)" style=""></path></a><a xlink:href="#license-check"><text x="34.349609375" y="39.3515625" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="existt" class="flowchartt" transform="matrix(1,0,0,1,27.2305,367.0625)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="-3.546875">License</tspan><tspan dy="16.8" x="34.349609375">Exist ?</tspan></text></a><a xlink:href="#license-check"><path fill="var(--bg-color)" stroke="currentColor" d="M33.7265625,19.67578125L0,39.3515625L67.453125,78.703125L134.90625,39.3515625L67.453125,0L0,39.3515625" stroke-width="3" id="licenseValid" class="flowchart" transform="matrix(1,0,0,1,18.4766,501.7656)" style=""></path></a><a xlink:href="#license-check"><text x="38.7265625" y="39.3515625" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="licenseValidt" class="flowchartt" transform="matrix(1,0,0,1,18.4766,501.7656)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="-3.546875">Valid</tspan><tspan dy="16.8" x="38.7265625">License ?</tspan></text></a><a xlink:href="#3-playback"><rect x="0" y="0" width="136.734375" height="35.65625" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" class="flowchart" id="usage" transform="matrix(1,0,0,1,17.5625,657.9922)" style=""></rect></a><a xlink:href="#3-playback"><text x="10" y="17.828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="usaget" class="flowchartt" transform="matrix(1,0,0,1,17.5625,657.9922)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">Contents Playback </tspan></text></a><a xlink:href="#license-remove"><rect x="0" y="0" width="124.28125" height="35.65625" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" class="flowchart" id="removelicense" transform="matrix(1,0,0,1,23.7891,771.1719)" style=""></rect></a><a xlink:href="#license-remove"><text x="10" y="17.828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="removelicenset" class="flowchartt" transform="matrix(1,0,0,1,23.7891,771.1719)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">License Remove </tspan></text></a><a xlink:href="#playback-finish"><rect x="0" y="0" width="56.578125" height="35.65625" rx="20" ry="20" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" class="flowchart" id="e" transform="matrix(1,0,0,1,57.6406,884.3516)" style=""></rect></a><a xlink:href="#playback-finish"><text x="10" y="17.828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="et" class="flowchartt" transform="matrix(1,0,0,1,57.6406,884.3516)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">close:</tspan></text></a><a xlink:href="#license-acquisition"><rect x="0" y="0" width="159.859375" height="35.65625" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" class="flowchart" id="acquire" transform="matrix(1,0,0,1,209.3828,523.2891)" style=""></rect></a><a xlink:href="#license-acquisition"><rect x="10" y="0" width="139.859375" height="35.65625" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="3" id="acquirei" transform="matrix(1,0,0,1,209.3828,523.2891)" style=""></rect></a><a xlink:href="#license-acquisition"><text x="20" y="17.828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="acquiret" class="flowchartt" transform="matrix(1,0,0,1,209.3828,523.2891)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">License Acquisition</tspan></text></a><a xlink:href="#license-check"><path fill="var(--bg-color)" stroke="currentColor" d="M32.267578125,19.67578125L0,39.3515625L64.53515625,78.703125L129.0703125,39.3515625L64.53515625,0L0,39.3515625" stroke-width="3" id="acquireLicensecheck" class="flowchart" transform="matrix(1,0,0,1,440.6367,501.7656)" style=""></path></a><a xlink:href="#license-check"><text x="37.267578125" y="39.3515625" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" id="acquireLicensecheckt" class="flowchartt" transform="matrix(1,0,0,1,440.6367,501.7656)" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="-3.546875">Valid</tspan><tspan dy="16.8" x="37.267578125">License?</tspan></text></a><path fill="none" stroke="currentColor" d="M85.9296875,63.1796875C85.9296875,63.1796875,85.9296875,101.38045835494995,85.9296875,114.67984781763516" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objs9z4v)" style=""></path><path fill="none" stroke="currentColor" d="M85.9296875,197.8828125C85.9296875,197.8828125,85.9296875,254.35777792334557,85.9296875,270.90317794971634" stroke-width="3" marker-end="url(#raphael-marker-endblock33-obje3ue8)" style=""></path><text x="90.9296875" y="207.8828125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.8515625">yes</tspan></text><path fill="none" stroke="currentColor" d="M159.21875,158.53125C159.21875,158.53125,184.21875,158.53125,184.21875,158.53125C184.21875,158.53125,184.21875,859.3515625,184.21875,859.3515625C184.21875,859.3515625,85.9296875,859.3515625,85.9296875,859.3515625C85.9296875,859.3515625,85.9296875,872.6555337905884,85.9296875,879.8531901333481" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objwip38)" style=""></path><text x="164.21875" y="148.53125" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">no</tspan></text><path fill="none" stroke="currentColor" d="M85.9296875,311.0625C85.9296875,311.0625,85.9296875,349.26327085494995,85.9296875,362.56266031763516" stroke-width="3" marker-end="url(#raphael-marker-endblock33-obja7ql2)" style=""></path><path fill="none" stroke="currentColor" d="M85.9296875,445.765625C85.9296875,445.765625,85.9296875,483.96639585494995,85.9296875,497.26578531763516" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objvbd46)" style=""></path><text x="90.9296875" y="455.765625" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">yes</tspan></text><path fill="none" stroke="currentColor" d="M144.62890625,406.4140625C144.62890625,406.4140625,178.21875,406.4140625,178.21875,406.4140625C178.21875,406.4140625,184.21875,394.4140625,190.21875,406.4140625C190.21875,406.4140625,289.3125,406.4140625,289.3125,406.4140625C289.3125,406.4140625,289.3125,497.30010879039764,289.3125,518.7790376988705" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objo9p6j)" style=""></path><text x="149.62890625" y="396.4140625" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.8515625">no</tspan></text><path fill="none" stroke="currentColor" d="M85.9296875,580.46875C85.9296875,580.46875,85.9296875,636.9437154233456,85.9296875,653.4891154497163" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objdql64)" style=""></path><text x="90.9296875" y="590.46875" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">yes</tspan></text><path fill="none" stroke="currentColor" d="M153.3828125,541.1171875C153.3828125,541.1171875,178.21875,541.1171875,178.21875,541.1171875C178.21875,541.1171875,184.21875,529.1171875,190.21875,541.1171875C190.21875,541.1171875,199.22537103295326,541.1171875,204.88969129195902,541.1171875" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objp9v18)" style=""></path><text x="158.3828125" y="531.1171875" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.8515625">no</tspan></text><path fill="none" stroke="currentColor" d="M85.9296875,693.6484375C85.9296875,693.6484375,85.9296875,750.1234029233456,85.9296875,766.6688029497163" stroke-width="3" marker-end="url(#raphael-marker-endblock33-obj1wvf3)" style=""></path><path fill="none" stroke="currentColor" d="M85.9296875,806.828125C85.9296875,806.828125,85.9296875,874.3515625,85.9296875,874.3515625C85.9296875,874.3515625,85.9296875,877.1946182250977,85.9296875,879.8488772809505" stroke-width="3" marker-end="url(#raphael-marker-endblock33-obj4gdtn)" style=""></path><path fill="none" stroke="currentColor" d="M369.2421875,541.1171875C369.2421875,541.1171875,420.48158331681043,541.1171875,436.1436252022222,541.1171875" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objnc96i)" style=""></path><path fill="none" stroke="currentColor" d="M505.171875,580.46875C505.171875,580.46875,505.171875,622.9921875,505.171875,622.9921875C505.171875,622.9921875,190.21875,622.9921875,190.21875,622.9921875C190.21875,622.9921875,184.21875,610.9921875,178.21875,622.9921875C178.21875,622.9921875,85.9296875,622.9921875,85.9296875,622.9921875C85.9296875,622.9921875,85.9296875,644.0352592468262,85.9296875,653.4882016330957" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objh9u01)" style=""></path><text x="510.171875" y="590.46875" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.859375">yes</tspan></text><path fill="none" stroke="currentColor" d="M569.70703125,541.1171875C569.70703125,541.1171875,594.70703125,541.1171875,594.70703125,541.1171875C594.70703125,541.1171875,594.70703125,839.3515625,594.70703125,839.3515625C594.70703125,839.3515625,190.21875,839.3515625,190.21875,839.3515625C190.21875,839.3515625,184.21875,827.3515625,178.21875,839.3515625C178.21875,839.3515625,85.9296875,839.3515625,85.9296875,839.3515625C85.9296875,839.3515625,85.9296875,868.454699754715,85.9296875,879.8515337773133" stroke-width="3" marker-end="url(#raphael-marker-endblock33-objbq8ya)" style=""></path><text x="574.70703125" y="531.1171875" text-anchor="start" font-family="&quot;Arial&quot;" font-size="14px" stroke="none" fill="currentColor" stroke-width="1" style="text-anchor: start; font-family: Arial; font-size: 14px;"><tspan dy="4.8515625">no</tspan></text></svg></div><blockquote><p><span>NCG SDK flow</span></p><ol start='' ><li><span>SDK is initialized.</span></li><li><span>Check whether it is the packaged contents.</span></li></ol><ul><li><span>Check the license if it is the packaged contents.</span></li><li><span>If it is not the packaged contents, stop (clear the contents).</span></li></ul><ol start='3' ><li><span>Check the license.</span></li></ol><ul><li><span>If the license exists, check whether it is valid.</span></li><li><span>If the license doesn’t exist, the license is requested to the license server and verified.</span></li></ul><ol start='4' ><li><span>Check whether the license is valid.</span></li></ol><ul><li><span>If the license is valid, the use of contents is allowed.</span></li><li><span>If the license is not valid, the use of contents is not allowed.</span></li></ul><ol start='5' ><li><span>After the use of contents, the license can be removed.</span></li></ol><ul><li><span>The license can be removed if necessary (Optional).</span></li></ul></blockquote><p>&nbsp;</p><hr /><p>&nbsp;</p><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><p><span>The SDK supports operation in the simulator, but there are restrictions on playing encrypted content.</span></p><ul><li><span>NCG-encrypted .mp4 files can be played if the license permits simulator playback.</span></li><li><span>HLS-NCG content cannot be played on the simulater due to platform restrictions.</span></li></ul></li></ul></blockquote><p>&nbsp;</p><hr /><p>&nbsp;</p><h2 id='1-sdk-initialization'><span>1. SDK Initialization</span></h2><h3 id='initialize'><span>Initialize</span></h3><p><span>SDK sets the data such as RODB(Right Object DataBase), Device ID, On/Off line policies, Secure Time, start of Local Web Server, etc. through the initialization. </span></p><h4 id='-sharedinstance'><font color="Teal"><span>+ sharedInstance</span></font></h4><p><span>Singleton pattern is applied to SDK, and to use </span><code>Ncg2Agent</code><span> object, it needs to be approached through </span><code>sharedInstance:</code><span>. </span>
<span>If you try to create the object in the form of </span><code>alloc</code><span> or </span><code>init,</code><span> an exception will occur; therefore, direct object creation should be avoided. </span><br/><span>Acquire instance by creating </span><em><strong><span>Ncg2Agent</span></strong></em><span> object. </span></p><figure><table><thead><tr><th style='text-align:right;' ><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' ><font color="Teal"><span>+ (id) sharedInstance</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><span>Ncg2Agent object creation</span></td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--initialize'><font color="Teal"><span>- initialize:</span></font></h4><figure><table><thead><tr><th style='text-align:right;' ><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' ><font color="Teal"><span>- (BOOL) initialize</span></font></td><td><span>:</span></td><td><span>(OfflineSupportPolicy)policy</span></td><td><span>On/off-line scenario policy decision</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>rodbPath</span></td><td><span>:</span></td><td><span>(NSString*)rodbPath</span></td><td><span>license - set the path of DB storage; automatically created when nil is input</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>deviceId</span></td><td><span>:</span></td><td><span>(NSString*)deviceId</span></td><td><span>Device - ID input, automatically extracted when nil is input</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>return error if it is not nil</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><font color="Teal"><span>- (BOOL) initialize</span></font></td><td><span>:</span></td><td><span>(OfflineSupportPolicy)policy</span></td><td><span>On/off-line scenario policy decision</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>executionLimit</span></td><td><span>:</span></td><td><span>(int)executionLimit</span></td><td><span>if it is off-line, designate the number of times it is executed; infinite if it is &quot;0&quot;</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>rodbPath</span></td><td><span>:</span></td><td><span>(NSString*)rodbPath</span></td><td><span>license - set the path of DB storage; automatically created when nil is input</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>deviceId</span></td><td><span>:</span></td><td><span>(NSString*)deviceId</span></td><td><span>Device - ID input, automatically extracted when nil is input</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>return error if it is not nil</span></td><td>&nbsp;</td></tr></tbody></table></figure><p><span>If </span><code>Ncg2Agent</code><span> object is created, data in SDK is set by calling </span><a href='#initialize'><span>initialize:</span></a><span>. To use SDK, it needs to be called at least once, and it is recommended to be called when the App is initialized. </span></p><p><em><strong><span>OfflineSupportPolicy</span></strong></em><span> has an effect on SDK operation scenario when the device is offline. </span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="objectivec"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="objectivec"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-keyword">enum</span> <span class="cm-variable">_OfflineSupportPolicy</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">OfflineSupportNo</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">OfflineSupportYes</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">OfflineSupportPolicy</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre><ul><li><code>OfflineSupportNo</code><span>: It is a policy that is only operated when SDK is On-line.</span>
<span>Even if a valid license exists in the device, the license is always acquired through the license server.</span>
<span>It there is need to enhance web security and stabilize the operation, it is recommended to use </span><code>OfflineSupportNo</code><span> policy.</span></li><li><code>OfflineSupportYes</code><span>: It is a policy that is only operated when SDK is On/Off-line.</span>
<span>If a valid license exists in the device, the license is used; if not, the license is acquired through the license server.</span>
<span>If there are previously downloaded contents in the device with a valid license, they can be played regardless of On/Off-line. </span></li></ul><p><em><strong><span>executionLimit</span></strong></em><span> can decide the number of times SDK (or app) can executed when it is Off-line. If it is used more times than the predefined number of times, </span><a href='#initialize'><span>initialize:</span></a><span> needs to be called on-line, and the number of times is initialized. Designation of the number of times to be executed is operated only under </span><code>OfflineSupportYes</code><span> policy; infinite if it is‘0’.</span></p><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><em><span>executionLimit</span></em><span> is the number of times </span><a href='#initialize'><span>initialize:</span></a><span> is called off-line, and the status change which is from the Background to the Foreground does not affect the number.</span></li><li><em><span>excutionLimit</span></em><span> - </span><a href='#initialize'><span>initialize:</span></a><span> without a parameter sets the number of times SDK is used off-line to be </span><strong><code>10</code></strong><span> times if </span><em><span>OfflineSupportPolicy</span></em><span> is </span><code>OfflineSupportYes</code><span>.</span></li></ul></blockquote><p><em><strong><span>rodbPath</span></strong></em><span> designates the storage path of RODB. If it is not designated, it is designated to be same as the path set in the SDK.</span></p><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>In case of copying RODB (license) files, restoring via iTunes, or synchronizing iCloud, the SDK is considered to be a modification of RODB files.</span></li><li><span>If modulated, Delete the RODB file and Re-Create it.</span></li><li><span>In such cases, return is </span><code>YES</code><span> but corresponding contents are stored in </span><code>Error</code><span>.</span></li></ul></blockquote><p><em><strong><span>deviceId</span></strong></em><span> is a value that is importantly used for limiting the number of devices per user ID and for encrypted communication with the license server. ID must be unique, and must not be changed. If ‘nil’ is input, it is automatically created inside SDK.</span></p><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>Device ID created inside SDK is stored the KeyChain, and the Device ID is not deleted even if the app is deleted.</span></li><li><span>If the app is reinstalled, the Device ID in the KeyChain is used.</span></li><li><span>If DFU (Device Firmware Upgrade) is executed in the device, the Device ID is deleted since the KeyChain is initialized.</span></li><li><span>If the Device ID is deleted, SDK issues new Device ID.</span></li></ul></blockquote><h3 id='local-web-server'><span>Local Web Server</span></h3><p><span>The Local Web Server has the role of sensing external output and multiple connection, decryption, and interface with external servers. To receive the events that are created in the Local Web Server, you can register Delegate at the location you want to receive.</span>
<span>If </span><a href='#2-license'><span>license verification</span></a><span> process and </span><a href='#3-playback'><span>Play</span></a><span> place are different class, the Delegate needs to be installed in both location. </span></p><h4 id='--getlocalwebserverinstance'><font color="Teal"><span>- getLocalWebServerInstance</span></font></h4><p><em><strong><span>Ncg2Webserver</span></strong></em><span> object created in </span><a href='#initialize'><span>initialize:</span></a><span> is acquired. </span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (Ncg2Webserver*) getLocalWebServerInstance</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><span>Ncg2Webserver object return</span></td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='local-web-server-protocol'><font color="0088CF"><span> Local Web Server Protocol</span></font><span> </span></h4><p><span>Call back function that receives events created in the Local Web Server </span></p><h5 id='--onnotification'><font color="Teal"><span>- onNotification:</span></font></h5><p><span>It returns an alarm, if there is the alarm in the Local Web Server.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="brown"><span>WebServerDelegate(Required)</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) onNotification</span></font></td><td><span>:</span></td><td><span>(int)notificationCode</span></td><td><span>Notification Code is returned</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>notifyMessage</span></td><td><span>:</span></td><td><span>(NSString*)notifyMessage</span></td><td><span>Notification message is returned</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h5 id='--onerror'><font color="Teal"><span>- onError:</span></font></h5><p><span>It returns the error, if there is an error in the Local Web Server. </span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="brown"><span>WebServerDelegate(Required)</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) onError</span></font></td><td><span>:</span></td><td><span>(int)errorCode</span></td><td><span>Error Code is returned</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>errorMessage</span></td><td><span>:</span></td><td><span>(NSString*)errorMessage</span></td><td><span>Error message is returned</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h5 id='--oncheckplayerstatus'><font color="Teal"><span>- onCheckPlayerStatus:</span></font></h5><p><span>It is used to check whether the data is sent to a real player, when the local web server sends the data. The local web server calls this function in every certain term.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="brown"><span>WebServerDelegate(Required)</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (</span><a href='#font-color0088cf-playerstatefont'><span>PlayerState</span></a><span>) onCheckPlayerStatus</span></font></td><td><span>:</span></td><td><span>(NSString*)uri</span></td><td><span>Playback URL is returned</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="objectivec" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="objectivec"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> (<span class="cm-variable">PlayerState</span>) <span class="cm-variable">onCheckPlayerStatus</span>:(<span class="cm-variable">NSString</span> <span class="cm-operator">*</span>)<span class="cm-variable">uri</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">nReturnVal</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;<span class="cm-comment">//NCGPlayerStatusFailed;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">switch</span> ([<span class="cm-keyword">self</span>.<span class="cm-variable">mPlayer</span>.<span class="cm-variable">currentItem</span> <span class="cm-variable">status</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">AVPlayerItemStatusUnknown</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nReturnVal</span> <span class="cm-operator">=</span> <span class="cm-variable">PlayerStateUnknown</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-variable">AVPlayerItemStatusReadyToPlay</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nReturnVal</span> <span class="cm-operator">=</span> <span class="cm-variable">PlayerStateReadyToPlay</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">default</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nReturnVal</span> <span class="cm-operator">=</span> <span class="cm-variable">PlayerStateFail</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">nReturnVal</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 418px;"></div><div class="CodeMirror-gutters" style="display: none; height: 418px;"></div></div></div></pre><h4 id='playerstate'><font color="0088CF"><span> PlayerState</span></font></h4><p><span>It is a value that is used to show the status of the player.</span></p><figure><table><thead><tr><th>&nbsp;</th><th><font color="880000"><span>PlayerState</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>PlayerStateUnknown</span></font></td><td><span>State of the player is unknown</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>PlayerStateReadyToPlay</span></font></td><td><span>Ready to play state</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>PlayerStateFail</span></font></td><td><span>error or released state</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--setwebserverdelegate'><font color="Teal"><span>- setWebServerDelegate:</span></font></h4><p><span>It is a function that registers an object of class that will receive the event of the local web server.  </span><em><strong><span>WebServerDelegate</span></strong></em><span> is declared to the related class.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Webserver.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) setWebServerDelegate</span></font></td><td><span>:</span></td><td><span>(id&lt; WebServerDelegate &gt;)webServerDelegate</span></td><td><span>Register an object that will receive the event</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>The event created from the local web server must be received and handled appropriately. </span>
<span>For example, if external display occurs during the use of contents that the external display is restricted, the local web server stops encryption and creates the event; it needs to be received and handled appropriately.</span></li></ul></blockquote><p>&nbsp;</p><h3 id='http-callback-optional'><span>HTTP Callback (Optional)</span></h3><p><span>SDK exchanges necessary data with servers using internal HTTP. But there are some cases that external communication is needed, rather than internal HTTP communication. For example, if services such as one-time URL or HTTPS communication are used, HTTP communication must be controlled from outside.</span></p><h4 id='http-callback-protocol'><font color="0088CF"><span> HTTP Callback Protocol</span></font><span> </span></h4><p><span>It is the HTTP callback function. If an object is registered to </span><a href='#sethttprequestdelegate'><span>setHttpRequestDelegate:</span></a><span>, internal HTTP communication is proceeded with the following function. </span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="brown"><span>NcgHttpRequestDelegate(Required)</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSData*) handleHttpRequest</span></font></td><td><span>:</span></td><td><span>(NSString*)requestURL</span></td><td><span>Request URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>urlParameter</span></td><td><span>:</span></td><td><span>(NSString *)parameter</span></td><td><span>Additional URL information</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (int) getResponseStatus</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><span>HTTP state code callback</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) getResponseMessage</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><span>HTTP response message callback</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) getLastErrorMessage</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><span>HTTP error message callback</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--sethttprequestdelegate'><font color="Teal"><span>- setHttpRequestDelegate:</span></font></h4><p><span>It is a function that receives HTTP callback event. It declares </span><em><strong><span>NcgHttpRequestDelegate</span></strong></em><span> to the related class. </span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) setHttpRequestDelegate</span></font></td><td><span>:</span></td><td><span>(id&lt; NcgHttpRequestDelegate &gt;)delegate</span></td><td><span>Register an object that will receive the event</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='exception-handle-optional'><span>Exception Handle (Optional)</span></h3><p><span>It is used when you want to receive an error or log occurred inside SDK. Also, when a commercial crash report product is used, prompt understanding of the cause becomes possible by checking the error occurred inside.</span></p><h3 id='exceptional-event-protocol'><font color="0088CF"><span> Exceptional Event Protocol</span></font><span> </span></h3><p><span>It is a function that will receive exceptional events. You can declare it to implement inside.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="brown"><span>NcgExceptionalEventDelegate(Optional)</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) log</span></font></td><td><span>:</span></td><td><span>(NSString*)logMessage</span></td><td><span>returns log messages</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) logHandle</span></font></td><td><span>:</span></td><td><span>(NSError*)error</span></td><td><span>returns error codes</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--setexceptionaleventdelegate'><font color="Teal"><span>- setExceptionalEventDelegate:</span></font></h4><p><span>It is a function that registers an object of class which will receive the exception event.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) setExceptionalEventDelegate</span></font></td><td><span>:</span></td><td><span>(id&lt; NcgExceptionalEventDelegate &gt;)delegate</span></td><td><span>Register an object that will receive the event</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><hr /><p>&nbsp;</p><h2 id='2-license'><span>2. License</span></h2><p><span> In this chapter, the method for a validity test and acquiring/removing of packaged contents’ license is explained.</span></p><h3 id='contents-check'><span>Contents Check</span></h3><p><span>Check whether the contents are packaged contents.  </span></p><h4 id='--isncgcontent'><font color="Teal"><span>- isNcgContent:</span></font></h4><p><span>If the file path or URL is entered, it will return the result whether they are packaged contents </span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) isNcgContent</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>Path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>Returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><a href='#isncgcontent'><span>isNcgContent:</span></a><span> function is used frequently in functions provided by SDK.  For example, checking whether they are packaged contents takes place first inside functions such as checking, acquiring, and verifying of license. </span></li></ul></blockquote><h3 id='license-check'><span>License Check</span></h3><p><span>Check existence and validity of license for packaged contents.</span></p><h4 id='--checklicensevalidbypath'><font color="Teal"><span>- checkLicenseValidByPath:</span></font></h4><p><span>Validity of license can be verified by inputting the path or URL of packaged contents.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) checkLicenseValidByPath</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>Path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>result</span></td><td><span>:</span></td><td><span>(</span><a href='#license-validation'><span>LicenseValidation</span></a><span>*)lv</span></td><td><span>Returns the result of the license verification</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>Returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--checklicensevalidbycid'><font color="Teal"><span>- checkLicenseValidByCID:</span></font></h4><p><span>Validity of the license can be checked by inputting CID and Site ID of packaged contents.</span>
<code>cid</code><span> and </span><code>siteID</code><span> can be acquired with </span><a href='#getncg2headerinfo'><span>getNcg2HeaderInfo:</span></a><span>.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) checkLicenseValidByCID</span></font></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>contents ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>siteID</span></td><td><span>:</span></td><td><span>(NSString*)siteID</span></td><td><span>contents Site ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>result</span></td><td><span>:</span></td><td><span>(</span><a href='#license-validation'><span>LicenseValidation</span></a><span>*)lv</span></td><td><span>Returns the result of the license</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>Returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='license-acquisition'><span>License Acquisition</span></h3><p><span>It is a function that can acquire a license, if packaged contents do not have a license.</span></p><h4 id='--acquirelicensebypath'><font color="Teal"><span>- acquireLicenseByPath:</span></font></h4><p><span>The license can be acquired by inputting the path or URL of packaged contents.</span>
<code>orderID</code><span> is the information that a contents Provider (CP) provides.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) acquireLicenseByPath</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>userID</span></td><td><span>:</span></td><td><span>(NSString*)userID</span></td><td><span>user ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>orderID</span></td><td><span>:</span></td><td><span>(NSString*)orderID</span></td><td><span>order ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isTemporary</span></td><td><span>:</span></td><td><span>(BOOL)</span><a href='#removealltemporarylicense'><span>isTemporary</span></a></td><td><span>whether the license is stored</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--acquirelicensebycid'><font color="Teal"><span>- acquireLicenseByCID:</span></font></h4><p><span>License can be acquired by inputting CID and Site ID of packaged contents.</span>
<code>cid</code><span> and </span><code>siteID</code><span> can be acquired with </span><a href='#getncg2headerinfo'><span>getNcg2HeaderInfo:</span></a><span>.</span>
<code>orderID</code><span> is the information that a contents Provider (CP) provides.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) acquireLicenseByCID</span></font></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>contents ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>siteID</span></td><td><span>:</span></td><td><span>(NSString*)siteID</span></td><td><span>contents Site ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>userID</span></td><td><span>:</span></td><td><span>(NSString*)userID</span></td><td><span>userID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>orderID</span></td><td><span>:</span></td><td><span>(NSString*)orderID</span></td><td><span>orderID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>acquisitionUrl</span></td><td><span>:</span></td><td><span>(NSString*)acquisitionUrl</span></td><td><span>license server URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isTemporary</span></td><td><span>:</span></td><td><span>(BOOL)</span><a href='#removealltemporarylicense'><span>isTemporary</span></a></td><td><span>whether the license is stored</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>When the license is acquired, </span><code>isTemporary</code><span> parameter decides the operation of the license.</span>
<code>YES</code><span>: The license is not stored. It is suitable for the scenario that the license is acquired every time from the license server without storing the license.</span>
<span>After using the license, the license in the memory must be removed by calling </span><a href='#removealltemporarylicense'><span>removeAllTemporaryLicense:</span></a><span>.</span>
<code>NO</code><span>: The license is stored to be used. It is suitable for the scenario that uses the stored license, if the license is received and stored.</span>
<span>If necessary, the license can be removed by calling </span><a href='#removelicensebypath'><span>removeLicenseByPath:</span></a><span>, </span><a href='#removelicensebycid'><span>removeLicenseByCID:</span></a><span>.</span></li><li><span>If the returned value of </span><a href='#license-acquisition'><span>License Acquisition</span></a><span> is  </span><code>NCGERR_LICENSE_SERVER_RESPONSE_ERROR(0xF0002003),</code><span> this error (NSError) must be checked, since it is a definite server error.</span>
<span>Especially, if the server error code is </span><font color="red"><span>8002</span></font><span>, the error must be checked and treated since it is a custom error. </span></li></ul></blockquote><h4 id='--acquirelicensebytoken'><font color="#0088CF"><span>- acquireLicenseByToken:</span></font></h4><p><span>You can acquire licenses using tokens.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="0088CF"><span>-(BOOL) acquireLicenseByToken</span></font></td><td><span>:</span></td><td><span>(NSString*)token</span></td><td><span>token</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isTemporary</span></td><td><span>:</span></td><td><span>(BOOL)</span><a href='#removealltemporarylicense'><span>isTemporary</span></a></td><td><span>whether the license is stored</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><span>You can specify license request information, if necessary, when obtaining a license using a token. </span><code>cid</code><span> and </span><code>siteID</code><span> can be acquired with </span><a href='#getncg2headerinfo'><span>getNcg2HeaderInfo:</span></a><span>.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="0088CF"><span>-(BOOL) acquireLicenseByToken</span></font></td><td><span>:</span></td><td><span>(NSString*)token</span></td><td><span>token</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>cid</span></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>content ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>siteID</span></td><td><span>:</span></td><td><span>(NSString*)siteID</span></td><td><span>Site ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>userID</span></td><td><span>:</span></td><td><span>(NSString*)userID</span></td><td><span>User ID(optional)</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>acquisitionUrl</span></td><td><span>:</span></td><td><span>(NSString*)acquisitionUrl</span></td><td><span>License Server URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isTemporary</span></td><td><span>:</span></td><td><span>(BOOL)</span><a href='#removealltemporarylicense'><span>isTemporary</span></a></td><td><span>whether the license is stored</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>The token has already been created in order to acquire the license using the token.</span></li><li><span>The token requires content-packaged information </span><code>Site ID</code><span>, </span><code>ContentID(cid)</code><span>, and </span><code>Access Key</code><span>.</span></li><li><span>The token issuance process can be checked in </span><a href='https://sample.pallycon.com/dev/devconsole/customData.do?lang=en#create-token'><span>PallyCon Multi-DRM License Token API</span></a><span>.</span></li><li><span>For more information on token generation, please contact </span><a href='https://pallycon.zendesk.com'><span>INKA HelpDesk</span></a><span>.</span></li></ul></blockquote><p>&nbsp;</p><h3 id='license-remove'><span>License Remove</span></h3><p><span>It is a function that can remove the license of packaged contents.</span></p><h4 id='--removelicensebypath'><font color="Teal"><span>- removeLicenseByPath:</span></font></h4><p><span>It deletes the stored license. The license can be removed by inputting the path of packaged contents.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) removeLicenseByPath</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>Path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--removelicensebycid'><font color="Teal"><span>- removeLicenseByCID:</span></font></h4><p><span>The stored license is removed. The license can be removed by inputting CID of packaged contents.</span>
<code>cid</code><span> and </span><code>siteID</code><span> can be acquired with </span><a href='#getncg2headerinfo'><span>getNcg2HeaderInfo:</span></a><span>.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) removeLicenseByCID</span></font></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>contents ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) removeLicenseByCID</span></font></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>contents ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>siteID</span></td><td><span>:</span></td><td><span>(NSString*)siteID</span></td><td><span>contents Site ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--removealltemporarylicense'><font color="Teal"><span>- removeAllTemporaryLicense:</span></font></h4><p><span>It deletes the license stored in the memory. When acquiring the license of packaged contents (</span><a href='#acquirelicensebypath'><span>acquireLicenseByPath</span></a><span>, </span><a href='#acquirelicensebycid'><span>acquireLicenseByCID</span></a><span>), if it is temporarily acquired (`isTemporary=YES), </span><font color="red"><span>** it must be called **</span></font><span> to remove the license after the use of related contents is finished.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) removeAllTemporaryLicense</span></font></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>If the temporarily acquired license is not removed, </span><a href='#license-acquisition'><span>License Acquisition</span></a><span> is not tried until the application is terminated.</span></li></ul></blockquote><h3 id='license-information'><span>License Information</span></h3><p><span>The license information of packaged contents can be verified. To verify the license information, it should be in state which the license is already acquired.</span></p><h4 id='--getlicenseinfobypath'><font color="Teal"><span>- getLicenseInfoByPath:</span></font></h4><p><span>If there is a license already acquired, the information of the license can be validated by inputting the path of packaged contents.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) getLicenseInfoByPath</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>Path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>licenseValidation</span></td><td><span>:</span></td><td><span>(</span><a href='#licensevalidation'><span>LicenseValidation</span></a><span>*)lv</span></td><td><span>returns the license validation result</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>licenseInformation</span></td><td><span>:</span></td><td><span>(</span><a href='#ncg2licenseinformation'><span>Ncg2LicenseInformation</span></a><span>**)li</span></td><td><span>returns the license information</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--getlicenseinfobycid'><font color="Teal"><span>- getLicenseInfoByCID:</span></font></h4><p><span>If there is the acquired license, the license information can be verified by inputting ID(CID) and Site ID of packaged contents.</span>
<code>cid</code><span> and </span><code>siteID</code><span> can be acquired with </span><a href='#getncg2headerinfo'><span>getNcg2HeaderInfo:</span></a><span>.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(BOOL) getLicenseInfoByCID</span></font></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>contents ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>siteID</span></td><td><span>:</span></td><td><span>(NSString*)siteID</span></td><td><span>contents Site ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>licenseValidation</span></td><td><span>:</span></td><td><span>(</span><a href='#licensevalidation'><span>LicenseValidation</span></a><span>*)lv</span></td><td><span>returns the license verification result</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>licenseInformation</span></td><td><span>:</span></td><td><span>(</span><a href='#ncg2licenseinformation'><span>Ncg2LicenseInformation</span></a><span>**)li</span></td><td><span>returns the license information</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='ncg2licenseinformation'><span>Ncg2LicenseInformation </span></h3><p><span>It is the license information class.</span></p><figure><table><thead><tr><th>&nbsp;</th><th><font color="880000"><span>Ncg2LicenseInformation</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) getPlayStartDate</span></font></td><td><span>start date for license validity</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) getPlayEndDate</span></font></td><td><span>end date for license validity</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (long) getPlayFirstDate</span></font></td><td><span>date of the initial usage</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) getPlayVerificationMethod</span></font></td><td><span>verification method when the period is checked</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (long) getPlayDurationHour</span></font></td><td><span>total available time</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (long) getPlayTotalCount</span></font></td><td><span>remaining available number of times</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (long) getPlayRemainCount</span></font></td><td><span>does not use</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (</span><a href='#per'><span>Ncg2LicenseOutputProtectionPermission</span></a><span>*) getOutputProtectionPermission</span></font></td><td><span>whether external output is permitted</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='ncg2licenseoutputprotectionpermission'><span>Ncg2LicenseOutputProtectionPermission {#per}</span></h3><p><span>It is the external output permission information class.</span></p><figure><table><thead><tr><th>&nbsp;</th><th><font color="880000"><span>Ncg2LicenseOutputProtectionPermission</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (bool) getIsExternalDisplayAllow</span></font></td><td><span>whether to permit external output</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="gray"><span>- (int) getAps</span></font></td><td><span>does not use</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="gray"><span>- (int) getCgms_a</span></font></td><td><span>does not use</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="gray"><span>- (int) getCavendish</span></font></td><td><span>does not use</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="gray"><span>- (int) getHdcp</span></font></td><td><span>does not use</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (bool) getIsJailBreakAllow</span></font></td><td><span>whether to permit a jail breaking terminal</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="gray"><span>- (int) getSendReport</span></font></td><td><span>does not use</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (int) getIsJailBreakExternalDisplayAllow</span></font></td><td><span>whether to permit external output of a jail breaking terminal</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='licensevalidation'><span>LicenseValidation</span></h3><p><span>It is the license authority information.</span></p><figure><table><thead><tr><th>&nbsp;</th><th><font color="880000"><span>LicenseValidation</span></font></th><th>&nbsp;</th><th><span>process</span></th><th>&nbsp;</th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationValid</span></font></td><td><span>valid license</span></td><td><a href='#3-playback'><span>Playback</span></a></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationNotExist</span></font></td><td><span>when the license does not exist. </span><a href='#license-acquisition'><span>License Acquisition</span></a></td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationExpired</span></font></td><td><span>license expired</span></td><td><span>contents can’t be used</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationBeforeStartDate</span></font></td><td><span>When it is before the start date yet</span></td><td><span>wait until the start date</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationExceededPlayCount</span></font></td><td><span>the play count is expired</span></td><td><span>contents can’t be used</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationExternalDeviceDisallowed</span></font></td><td><span>external output is not permitted</span></td><td><a href='#external-display'><span>External Display</span></a></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationNotSupportOffline</span></font></td><td><span>does not support Off-line operation</span></td><td><span>requires On-line environment</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationAbnormalDevice</span></font></td><td><span>Jail breaking terminals are not permitted</span></td><td><span>contents can’t be used</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationOfflineTooLong</span></font></td><td><span>Secure Time update is needed</span></td><td><a href='#updatesecuretimefromserver'><span>updateSecureTimeFromServer</span></a><span> is called</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>LicenseValidationScreenRecorderDetected</span></font></td><td><span>when the screen monitoring APP is detected</span></td><td><a href='#screen-recorder'><span>Screen Recorder</span></a></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='header-information'><span>Header Information</span></h3><p><span>Information regarding the contents are stored in the header of packaged contents.</span></p><h4 id='--getncg2headerinfo'><font color="Teal"><span>- getNcg2HeaderInfo:</span></font></h4><p><span>It gets the header information of packaged content file.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>-(</span><a href='#ncg2headerinformation'><span>Ncg2HeaderInformation</span></a><span>*) getNcg2HeaderInfo</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>Path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='ncg2headerinformation'><span>Ncg2HeaderInformation</span></h3><p><span>It is a class that shows the header information of packaged contents.</span></p><figure><table><thead><tr><th>&nbsp;</th><th><font color="880000"><span>Ncg2HeaderInformation</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) contentID</span></font></td><td><span>contents ID</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) siteID</span></font></td><td><span>site ID</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) acquisitionUrl</span></font></td><td><span>license server URL</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) source</span></font></td><td><span>service provider</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (NSString*) packDate</span></font></td><td><span>date of packaging</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (int) encryptionLevel</span></font></td><td><span>encryption level</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>- (int) encryptionRange</span></font></td><td><span>encryption range</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><hr /><p>&nbsp;</p><h2 id='3-playback'><span>3. Playback</span></h2><p><span>If the license of packaged contents is valid, the contents can be used.</span>
<span>But the packaged contents are encrypted and need to be decrypted; such role is taken by the local web server. Therefore, it needs to be requested to the local web rather than the actual path or URL of contents, when the packaged contents are played.</span>
<span>Such procedure is shown in the following flow chart.</span></p><div class="md-diagram-panel md-fences-adv-panel"><svg height="440" version="1.1" width="690.515625" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.5px; top: -0.75px; max-width: 100%; height: auto;" viewBox="0 0 690.515625 440"><desc>Created with Raphaël 2.2.0</desc><defs><marker id="raphael-marker-endblock55-obj78w2i" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-objxq71i" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-objqlfim" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-objfhrbt" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-objsro66" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj4fyyx" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj277ro" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj12siw" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="currentColor" stroke="none"></use></marker></defs><rect x="10" y="20" width="77.625" height="38" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="2" style=""></rect><rect x="20" y="30" width="57.625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="48.8125" y="39" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">Player</tspan></text><rect x="10" y="382" width="77.625" height="38" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="2" style=""></rect><rect x="20" y="392" width="57.625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="48.8125" y="401" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">Player</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M48.8125,58L48.8125,382" stroke-width="2" style=""></path><rect x="212.4375" y="20" width="173.625" height="38" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="2" style=""></rect><rect x="222.4375" y="30" width="153.625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="299.25" y="39" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">Local Web Server</tspan></text><rect x="212.4375" y="382" width="173.625" height="38" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="2" style=""></rect><rect x="222.4375" y="392" width="153.625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="299.25" y="401" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">Local Web Server</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M299.25,58L299.25,382" stroke-width="2" style=""></path><rect x="438.859375" y="20" width="221.65625" height="38" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="2" style=""></rect><rect x="448.859375" y="30" width="201.65625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="549.6875" y="39" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">Local/Remote Contents</tspan></text><rect x="438.859375" y="382" width="221.65625" height="38" rx="0" ry="0" fill="var(--bg-color)" stroke="currentColor" stroke-width="2" style=""></rect><rect x="448.859375" y="392" width="201.65625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="549.6875" y="401" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">Local/Remote Contents</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M549.6875,58L549.6875,382" stroke-width="2" style=""></path><rect x="102.015625" y="74" width="144.03125" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="174.03125" y="83" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">1. Playback URL</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M299.25,96C299.25,96,89.11174416542053,96,53.81508400570601,96" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj78w2i)" stroke-dasharray="6,2" style=""></path><rect x="58.8125" y="112" width="230.4375" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="174.03125" y="121" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">2. Contents Data Request</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M48.8125,134C48.8125,134,258.95075583457947,134,294.247415994294,134" stroke-width="2" marker-end="url(#raphael-marker-endblock55-objxq71i)" stroke-dasharray="6,2" style=""></path><rect x="309.25" y="150" width="230.4375" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="424.46875" y="159" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">3. Contents Date Request</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M299.25,172C299.25,172,509.38825583457947,172,544.684915994294,172" stroke-width="2" marker-end="url(#raphael-marker-endblock55-objqlfim)" stroke-dasharray="6,2" style=""></path><rect x="347.65625" y="188" width="153.625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="424.46875" y="197" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">4. Contents Date</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M549.6875,210C549.6875,210,339.54924416542053,210,304.252584005706,210" stroke-width="2" marker-end="url(#raphael-marker-endblock55-objfhrbt)" stroke-dasharray="6,2" style=""></path><rect x="324.25" y="230" width="124.84375" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="386.671875" y="239" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">5. Decryption</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M299.25,225L319.25,225" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="var(--bg-color)" stroke="currentColor" d="M319.25,225L319.25,258" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="var(--bg-color)" stroke="currentColor" d="M319.25,258C319.25,258,310.1691131591797,258,304.2452533841133,258" stroke-width="2" stroke-dasharray="none" marker-end="url(#raphael-marker-endblock55-objsro66)" style=""></path><rect x="92.40625" y="264" width="163.25" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="174.03125" y="273" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">6. Decrypted Data</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M299.25,286C299.25,286,89.11174416542053,286,53.81508400570601,286" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj4fyyx)" stroke-dasharray="6,2" style=""></path><rect x="73.8125" y="306" width="105.625" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="126.625" y="315" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">7. Playback</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M48.8125,301L68.8125,301" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="var(--bg-color)" stroke="currentColor" d="M68.8125,301L68.8125,334" stroke-width="2" stroke-dasharray="none" style=""></path><path fill="var(--bg-color)" stroke="currentColor" d="M68.8125,334C68.8125,334,59.73161315917969,334,53.80775338411331,334" stroke-width="2" stroke-dasharray="none" marker-end="url(#raphael-marker-endblock55-obj277ro)" style=""></path><rect x="87.609375" y="340" width="172.84375" height="18" rx="0" ry="0" fill="none" stroke="none" style=""></rect><text x="174.03125" y="349" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="currentColor" style="text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;"><tspan dy="5.515625">8. Playback Finish</tspan></text><path fill="var(--bg-color)" stroke="currentColor" d="M48.8125,362C48.8125,362,258.95075583457947,362,294.247415994294,362" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj12siw)" stroke-dasharray="6,2" style=""></path></svg></div><blockquote><ol start='' ><li><span>Playback URL is acquired from the local web server.</span></li><li><span>The player requests the contents data with the playback URL received from the local web server.</span></li><li><span>The local web server requests the downloaded contents or the contents data in the remote location.</span></li><li><span>The contents are sent to local web server in encryption.</span></li><li><span>The local web server decrypts the encrypted data.</span></li><li><span>The decrypted data is sent to the player.</span></li><li><span>The player plays the decrypted data.</span></li><li><span>If the playback is finished, temporary license/playback URL is removed.</span></li></ol></blockquote><h3 id='download-contents'><span>Download Contents</span></h3><p><span>For the contents that are downloaded or being downloaded, the playback URL is requested using the function below.</span></p><p></font></p><h4 id='--addlocalfilepathforplayback'><font color="Teal"><span>- addLocalFilePathForPlayback:</span></font></h4><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Webserver.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addLocalFilePathForPlayback</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>path of stored contents or contents being downloaded</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>remoteUrlForDnp</span></td><td><span>:</span></td><td><span>(NSString*)remoteUrlForDnp</span></td><td><span>contents download URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>fileSize</span></td><td><span>:</span></td><td><span>(int64_t)fileSize</span></td><td><span>contents file size</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='progressive-download'><span>Progressive Download</span></h3><p><span>If packaged contents are the contents uploaded to the web server, the playback URL is requested using the function below.</span></p><h4 id='--addprogressivedownloadurlforplayback'><font color="Teal"><span>- addProgressiveDownloadUrlForPlayback:</span></font></h4><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Webserver.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addProgressiveDownloadUrlForPlayback</span></font></td><td><span>:</span></td><td><span>(NSString*)url</span></td><td><span>contents URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='http-live-streaminghls'><span>HTTP Live Streaming(HLS) </span></h3><p><span>If packaged contents are HLS contents, the playback URL can be requested. </span></p><h4 id='--addhttplivestreamurlforplayback'><font color="Teal"><span>- addHttpLiveStreamUrlForPlayback:</span></font></h4><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Webserver.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addHttpLiveStreamUrlForPlayback</span></font></td><td><span>:</span></td><td><span>(NSString*)url</span></td><td><span>Content URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addHttpLiveStreamUrlForPlayback</span></font></td><td><span>:</span></td><td><span>(NSString*)url</span></td><td><span>Content URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isLiveHLS</span></td><td><span>:</span></td><td><span>(BOOL)isLiveHLS</span></td><td><span>LiveE HLS or Not</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addHttpLiveStreamUrlForPlayback</span></font></td><td><span>:</span></td><td><span>(NSString*)url</span></td><td><span>Content URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>cid</span></td><td><span>:</span></td><td><span>(NSString*)cid</span></td><td><span>Content ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addHttpLiveStreamUrlForPlayback</span></font></td><td><span>:</span></td><td><span>(NSString*)url</span></td><td><span>Content URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isLiveHLS</span></td><td><span>:</span></td><td><span>(BOOL)isLiveHLS</span></td><td><span>LiveE HLS or Not</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>contentId</span></td><td><span>:</span></td><td><span>(NSString*)contentId</span></td><td><span>Content ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>siteId</span></td><td><span>:</span></td><td><span>(NSString*)siteId</span></td><td><span>Site ID</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><span>&lt;!--</span>
<span>Unlike </span><a href='#addhttplivestreamurlforplayback'><span>addHttpLiveStreamUrlForPlayback:</span></a><span>, it is a function that does not check the key file related to m3u8 path, in advance. </span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Webserver.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) addHttpLiveStreamUrlForPlaybackWithoutChecking</span></font></td><td><span>:</span></td><td><span>(NSString*)url</span></td><td><span>contents URL</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' ><span>--&gt;</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--decreaseplaybackcount'><font color="Teal"><span>- decreasePlaybackCount:</span></font></h4><p><span>For the contents that the number of times is limited, </span><font color="red"><span> it must be called </span></font><span> to deduct the number when the contents are started or finished to be used.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (BOOL) decreasePlaybackCount</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>Path or URL of contents</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>Before deducting the number, it is recommended to send a message to notify it. </span></li><li><span>The remaining number of times can be viewed by checking </span><code>getPlayRemainCount</code><span> in (</span><a href='#license-information'><span>License Information</span></a><span>).</span></li><li><span>In Sample Project, the number is deducted when the video contents start to play.</span></li></ul></blockquote><h3 id='playback-finish'><span>Playback Finish </span></h3><p><span>If the playback ends, the playback URL that is used, is removed.</span></p><h4 id='--clearvirtualplaybackurls'><font color="Teal"><span>- clearVirtualPlaybackUrls</span></font></h4><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Webserver.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="0088CF"><span>- (void) clearVirtualPlaybackUrls</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><span>It is called when the player ends.</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p>&nbsp;</p><h2 id='4-security'><span>4. Security</span></h2><p><span>Factors in security operation and security issues that can occur during SDK operation, are explained.</span></p><h3 id='secure-time'><span>Secure Time</span></h3><p><span>Device time is not suitable to be used to verify the usage time of packaged contents since the user can change it. To solve such problem, SDK manages secure time internally.  But the time may not be accurate due to battery discharge or OS/device/application errors. In these cases, SDK needs to return that time needs to be updated on-line, and guides to update the time in the application. The secure time is managed as GMT time, and it is used for the verification of short-term contents’ license.</span></p><h4 id='--getncgsecuretime'><font color="Teal"><span>- getNcgSecureTime:</span></font></h4><p><span>The time used inside of SDK can be checked.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) getNcgSecureTime</span></font></td><td><span>returns GMT time</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--updatesecuretimefromserver'><font color="Teal"><span>- updateSecureTimeFromServer:</span></font></h4><p><span>Among the value of </span><a href='#licensevalidation'><span>LicenseValidation</span></a><span>, if   </span><strong><code>LicenseValidationOfflineTooLong</code></strong><span> is returned, it means there is an error in Secure Time; the Secure Time must be updated to valid time. Since the time is received from the external server, the device must be in On-line state.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (BOOL) updateSecureTimeFromServer</span></font></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='external-display'><span>External Display</span></h3><p><span>In the license, the information that can limit external display is included. According to this information, the external display can be permitted. In case the external display is permitted, the video can be played in some other screens through HDMI, Mirror, and AirPlay.</span>
<span>For the contents that the external display is limited, it needs to be notified to the user that ‘the contents that external display is limited’. Notification of the external display has two scenarios.   </span></p><ul><li><span>Before the contents playback</span>
<span>When checking the license of contents while the external display is connected (</span><a href='#license-check'><span>License Check</span></a><span>), if the external display is limited, they do not play.</span></li><li><span>During the contents playback</span>
<span>If the external display is connected during the playback of contents, the local web server stops the decryption and creates an event to </span><a href='#onnotification'><span>onNotification:</span></a><span> that the external display is connected; then stops the playback with an appropriate guide message.</span></li></ul><blockquote><p><strong><span>NOTE:</span></strong></p><p><span>-If the external display is connected during the playback, the local web server stops the decryption and does not send the data to the player. At that time, the alarm code to </span><a href='#onnotification'><span>onNotification:</span></a><span> is </span><code>LWS_NOTIFY_HDMI_DETECTED</code><span>.</span></p><ul><li><span>Even if the local web server doesn’t send the data, the player stops after it plays all the data it had in the cache; therefore, it is recommended to stop the playback when the event is created.</span></li><li><span>The screen of iOS device can be recorded with iOS8.0 or above + lightening cable + MAC OS Yosemite QuickTime Player. To prevent such </span><strong><span>recording, HLS contents</span></strong><span> must be used. </span></li></ul></blockquote><h3 id='screen-recorder'><span>Screen Recorder</span></h3><p><span>The contents that are played can be recorded with the screen recording App. If such App is installed, the contents playback must be stopped.</span></p><h4 id='--setscreenrecorderappdetecting'><font color="Teal"><span>- setScreenRecorderAppDetecting:</span></font></h4><p><span>In case SDK recording App is installed, it is set to disallow the contents playback (default). But for the audio contents, using the recording App may be inconvenient. In this case, you can set not to use this function.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (BOOL) setScreenRecorderAppDetecting</span></font></td><td><span>:</span></td><td><span>(BOOL)enabled</span></td><td><span>whether the recording App is detected</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='--getdetectedscreenrecordername'><font color="Teal"><span>- getDetectedScreenRecorderName:</span></font></h4><p><span>It returns the name of App that is detected. It notifies the user what it is, so that the user can remove it.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (NSString*) getDetectedScreenRecorderName</span></font></td><td><span>returns the name of recording App that is detected.</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>The recording App is detected through the recording App list. If the recording App is not in the list, it is not detected.</span></li><li><span>In this case, the related App information should be provided to Inka, so that it can be included in the list, and the latest SDK can be used.</span></li></ul></blockquote><p>&nbsp;</p><h2 id='5-ncg-file-io'><span>5. NCG File I/O</span></h2><p><span>Packaged contents can’t be controlled by general file I/O(fopen, fread, fseek..). To read the packaged contents accurately, </span><code>Ncg2File</code><span> interface needs to be used. </span>
<span>In this chapter, File I/O interface that can control the packaged NCG contents and unpacking (Decryption) are explained. </span></p><h3 id='--createncgfile'><font color="Teal"><span>- createNcgFile:</span></font></h3><p><span>To handle the NCG contents, </span><code>Ncg2File</code><span> object should not be directly created; rather, it should be created with the </span><a href='#createncgfile-1'><span>createNcgFile:</span></a><span> method.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2Agent.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (Ncg2File*) createNcgFile</span></font></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns NCG file object</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='--open'><font color="Teal"><span>- open:</span></font></h3><p><span>It opens the packaged NCG contents.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (BOOL) open</span></font></td><td><span>:</span></td><td><span>(NSString*)path</span></td><td><span>file path</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>isPrepare</span></td><td><span>:</span></td><td><span>(BOOL)isPrepare</span></td><td><span>whether to open a file in state which it can be decrypted</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p><em><strong><span>isPrepare</span></strong></em><span> If </span><code>YES</code><span>, it becomes possible to unpack by acquiring the packaged contents information and license information. </span>
<span>If </span><code>NO</code><span>, only packaged contents information can be acquired.</span></p><blockquote><p><strong><span>NOTE:</span></strong></p><ul><li><span>It can be opened </span><a href='#open'><span>open</span></a><span> only if a valid license for the contents to be unpacked exists.</span></li><li><span>If the license of contents to be unpacked does not exist, the license must be acquired License Acquisition](#license-acquisition)).</span></li></ul></blockquote><h3 id='--read'><font color="Teal"><span>- read:</span></font></h3><p><span>By reading the encrypted file, it returns the data size of decrypted data and data actually read.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (int) read</span></font></td><td><span>:</span></td><td><span>(unsigned char*)buffer</span></td><td><span>buffer that the decrypted data is stored</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>sizeToRead</span></td><td><span>:</span></td><td><span>(int)sizeToRead</span></td><td><span>buffer size</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='--seek'><font color="Teal"><span>- seek:</span></font></h3><p><span>It is used to move to a desired location of file.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (BOOL) seek</span></font></td><td><span>:</span></td><td><span>(int64_t)offset</span></td><td><span>designates the location to be moved (offset)</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>method</span></td><td><span>:</span></td><td><span>(</span><a href='#font-colortealseek-methodfont'><span>SeekMethod</span></a><span>)method</span></td><td><span>decides where to offset</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td><span>error</span></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns an error</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h4 id='seek-method'><font color="Teal"><span>Seek Method</span></font></h4><p><span>The seek method is explained.</span></p><figure><table><thead><tr><th>&nbsp;</th><th><font color="880000"><span>Seek Method</span></font></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>SM_Begin</span></font></td><td><span>initial location of file</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>SM_Current</span></font></td><td><span>current location of a file pointer</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;<span> </span>&nbsp;<span> </span>&nbsp;<span> </span><font color="0088CF"><span>SM_End</span></font></td><td><span>location of the end of file</span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='--getcurrentpointer'><font color="Teal"><span>- getCurrentPointer:</span></font></h3><p><span>It returns the current location of a file pointer.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (int64_t) getCurrentPointer</span></font></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns the current location of a file pointer</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='--getcontentsize'><font color="Teal"><span>- getContentSize:</span></font></h3><p><span>It returns the size of original file.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (int64_t) getContentSize</span></font></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns the size of original file.</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='--getncgheadersize'><font color="Teal"><span>- getNcgHeaderSize:</span></font></h3><p><span>It returns the header size of packaged contents.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (int64_t) getNcgHeaderSize</span></font></td><td><span>:</span></td><td><span>(NSError**)error</span></td><td><span>returns the header size</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='--close'><font color="Teal"><span>- close:</span></font></h3><p><span>It closes the opened file and allocated resources.</span></p><figure><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><font color="880000"><span>Ncg2File.h</span></font></th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td style='text-align:right;' >&nbsp;</td><td><font color="Teal"><span>- (void) close</span></font></td><td>&nbsp;</td><td>&nbsp;</td><td><a href='#open'><span>open</span></a><span> file is closed.</span></td><td>&nbsp;</td></tr><tr><td style='text-align:right;' >&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><h3 id='unpack-sample-code'><span>Unpack Sample Code</span></h3><p><span>It is a sample code that unpacks the packaged contents. </span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="objectivec" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="objectivec"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NSError</span><span class="cm-operator">*</span> <span class="cm-variable">error</span> <span class="cm-operator">=</span> <span class="cm-keyword">nil</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Ncg2File</span><span class="cm-operator">*</span> <span class="cm-variable">ncgFile</span> <span class="cm-operator">=</span> [<span class="cm-variable">Ncg2Agent</span> <span class="cm-variable">createNcgFile</span>:<span class="cm-operator">&amp;</span><span class="cm-variable">error</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span>( <span class="cm-variable">error</span> <span class="cm-operator">!=</span> <span class="cm-keyword">nil</span> )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">NSLog</span>(<span class="cm-keyword">@</span><span class="cm-string">"createNcgFile() Failed!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span>( [<span class="cm-variable">ncgFile</span> <span class="cm-variable">open</span>:<span class="cm-variable">ncgFilePath</span> <span class="cm-variable">isPrepare</span>:<span class="cm-atom">YES</span> <span class="cm-variable">error</span>:<span class="cm-operator">&amp;</span><span class="cm-variable">error</span>] <span class="cm-operator">==</span> <span class="cm-atom">NO</span> )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">NSLog</span>(<span class="cm-keyword">@</span><span class="cm-string">"open() Failed!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">FILE</span><span class="cm-operator">*</span> <span class="cm-variable">fp</span> <span class="cm-operator">=</span> <span class="cm-variable">fopen</span>( [<span class="cm-variable">unpackFilePath</span> <span class="cm-variable">UTF8String</span>], <span class="cm-string">"wb"</span> );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fseeko</span>(<span class="cm-variable">fp</span>, <span class="cm-number">0</span>, <span class="cm-variable">SEEK_SET</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">unsigned</span> <span class="cm-variable-3">char</span> <span class="cm-variable">buffer</span>[<span class="cm-number">8192</span>] <span class="cm-operator">=</span> {<span class="cm-number">0</span>};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">while</span>( <span class="cm-variable">TRUE</span> )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">int32_t</span> <span class="cm-variable">read</span> <span class="cm-operator">=</span> [<span class="cm-variable">ncgFile</span> <span class="cm-variable">read</span>:<span class="cm-variable">buffer</span> <span class="cm-variable">sizeToRead</span>:<span class="cm-keyword">sizeof</span>(<span class="cm-variable">buffer</span>) <span class="cm-variable">error</span>:<span class="cm-operator">&amp;</span><span class="cm-variable">error</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">error</span> <span class="cm-operator">!=</span> <span class="cm-keyword">nil</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">NSLog</span>(<span class="cm-keyword">@</span><span class="cm-string">"read() Failed!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  [<span class="cm-variable">ncgFile</span> <span class="cm-variable">close</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">fclose</span>( <span class="cm-variable">fp</span> );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> ( <span class="cm-variable">read</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">0</span> )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">fwrite</span>( <span class="cm-variable">buffer</span>, <span class="cm-number">1</span>, <span class="cm-variable">read</span>, <span class="cm-variable">fp</span> );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fclose</span>( <span class="cm-variable">fp</span> );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-variable">ncgFile</span> <span class="cm-variable">close</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 792px;"></div><div class="CodeMirror-gutters" style="display: none; height: 792px;"></div></div></div></pre><hr /></div></div>
</body>
</html>